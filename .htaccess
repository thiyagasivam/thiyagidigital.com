RewriteEngine On

# Force www and HTTPS
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

# City service page redirects
RewriteRule ^seo-services/$ seo-services [R=301,L]
RewriteRule ^seo-services$ seo-services.php [L,QSA,NC]
RewriteRule ^seo-services/([a-z-]+)/?$ seo-city.php?city=$1 [L,QSA]
RewriteRule ^sem-services/$ sem-services [R=301,L]
RewriteRule ^sem-services$ sem-services.php [L,QSA,NC]
RewriteRule ^sem-services/([a-z-]+)/?$ sem-services-city.php?city=$1 [L,QSA,NC]
RewriteRule ^web-development-service/$ web-development-service [R=301,L]
RewriteRule ^web-development-service$ web-development-service.php [L,QSA,NC]
RewriteRule ^web-development-service/([a-z-]+)/?$ web-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^smm-service/$ smm-service [R=301,L]
RewriteRule ^smm-service$ smm-service.php [L,QSA,NC]
RewriteRule ^smm-service/([a-z-]+)/?$ smm-city.php?city=$1 [L,QSA,NC]
RewriteRule ^content-writing-service/$ content-writing-service [R=301,L]
RewriteRule ^content-writing-service$ content-writing-service.php [L,QSA,NC]
RewriteRule ^content-writing-service/([a-z-]+)/?$ content-writing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^email-marketing-service/$ email-marketing-service [R=301,L]
RewriteRule ^email-marketing-service$ email-marketing-service.php [L,QSA,NC]
RewriteRule ^email-marketing-service/([a-z-]+)/?$ email-marketing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^wordpress-development-service/$ wordpress-development-service [R=301,L]
RewriteRule ^wordpress-development-service$ wordpress-development-service.php [L,QSA,NC]
RewriteRule ^wordpress-development-service/([a-z-]+)/?$ wordpress-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^link-building-service/$ link-building-service [R=301,L]
RewriteRule ^link-building-service$ link-building-service.php [L,QSA,NC]
RewriteRule ^link-building-service/([a-z-]+)/?$ link-building-city.php?city=$1 [L,QSA,NC]

# New Marketing Service City Pages
RewriteRule ^sms-marketing-service/$ sms-marketing-service [R=301,L]
RewriteRule ^sms-marketing-service$ sms-marketing-service.php [L,QSA,NC]
RewriteRule ^sms-marketing-service/([a-z-]+)$ sms-marketing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^affiliate-marketing-service/$ affiliate-marketing-service [R=301,L]
RewriteRule ^affiliate-marketing-service$ affiliate-marketing-service.php [L,QSA,NC]
RewriteRule ^affiliate-marketing-service/([a-z-]+)/?$ affiliate-marketing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^ecommerce-marketing-service/$ ecommerce-marketing-service [R=301,L]
RewriteRule ^ecommerce-marketing-service$ ecommerce-marketing-service.php [L,QSA,NC]
RewriteRule ^ecommerce-marketing-service/([a-z-]+)/?$ ecommerce-marketing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^amazon-marketing-service/$ amazon-marketing-service [R=301,L]
RewriteRule ^amazon-marketing-service$ amazon-marketing-service.php [L,QSA,NC]
RewriteRule ^amazon-marketing-service/([a-z-]+)/?$ amazon-marketing-city.php?city=$1 [L,QSA,NC]

# Website Design Service City Pages
RewriteRule ^basic-website-designing-service/$ basic-website-designing-service [R=301,L]
RewriteRule ^basic-website-designing-service$ basic-website-designing-service.php [L,QSA,NC]
RewriteRule ^basic-website-designing-service/([a-z-]+)/?$ basic-website-designing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^responsive-website-designing-service/$ responsive-website-designing-service [R=301,L]
RewriteRule ^responsive-website-designing-service$ responsive-website-designing-service.php [L,QSA,NC]
RewriteRule ^responsive-website-designing-service/([a-z-]+)/?$ responsive-website-designing-service-city.php?city=$1 [L,QSA,NC]
RewriteRule ^cms-website-designing-service/$ cms-website-designing-service [R=301,L]
RewriteRule ^cms-website-designing-service$ cms-website-designing-service.php [L,QSA,NC]
RewriteRule ^cms-website-designing-service/([a-z-]+)/?$ cms-website-designing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^cms-website-designing/([a-z-]+)/?$ cms-website-designing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^website-redesigning-service/$ website-redesigning-service [R=301,L]
RewriteRule ^website-redesigning-service$ website-redesigning-service.php [L,QSA,NC]
RewriteRule ^website-redesigning-service/([a-z-]+)/?$ website-redesigning-service-city.php?city=$1 [L,QSA,NC]
RewriteRule ^ui-ux-design-service/$ ui-ux-design-service [R=301,L]
RewriteRule ^ui-ux-design-service$ ui-ux-design-service.php [L,QSA,NC]
RewriteRule ^ui-ux-design-service/([a-z-]+)/?$ ui-ux-design-service-city.php?city=$1 [L,QSA,NC]
RewriteRule ^website-updates-maintenance-service/$ website-updates-maintenance-service [R=301,L]
RewriteRule ^website-updates-maintenance-service$ website-updates-maintenance-service.php [L,QSA,NC]
RewriteRule ^website-updates-maintenance-service/([a-z-]+)/?$ website-updates-maintenance-service-city.php?city=$1 [L,QSA,NC]

# Development Service City Pages
RewriteRule ^woocommerce-development-service/$ woocommerce-development-service [R=301,L]
RewriteRule ^woocommerce-development-service$ woocommerce-development-service.php [L,QSA,NC]
RewriteRule ^woocommerce-development-service/([a-z-]+)/?$ woocommerce-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^woocommerce-development/([a-z-]+)/?$ woocommerce-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^shopify-development-service/$ shopify-development-service [R=301,L]
RewriteRule ^shopify-development-service$ shopify-development-service.php [L,QSA,NC]
RewriteRule ^shopify-development-service/([a-z-]+)/?$ shopify-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^shopify-development/([a-z-]+)/?$ shopify-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^magento-development-service/$ magento-development-service [R=301,L]
RewriteRule ^magento-development-service$ magento-development-service.php [L,QSA,NC]
RewriteRule ^magento-development-service/([a-z-]+)/?$ magento-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^opencart-development-service/$ opencart-development-service [R=301,L]
RewriteRule ^opencart-development-service$ opencart-development-service.php [L,QSA,NC]
RewriteRule ^opencart-development-service/([a-z-]+)/?$ opencart-development-city.php?city=$1 [L,QSA,NC]

# Hosting & Domain Service City Pages
RewriteRule ^web-hosting-service/$ web-hosting-service [R=301,L]
RewriteRule ^web-hosting-service$ web-hosting-service.php [L,QSA,NC]
RewriteRule ^web-hosting-service/([a-z-]+)/?$ web-hosting-city.php?city=$1 [L,QSA,NC]
RewriteRule ^domain-registration-service/$ domain-registration-service [R=301,L]
RewriteRule ^domain-registration-service$ domain-registration-service.php [L,QSA,NC]
RewriteRule ^domain-registration-service/([a-z-]+)/?$ domain-registration-city.php?city=$1 [L,QSA,NC]
RewriteRule ^cloud-hosting-service/$ cloud-hosting-service [R=301,L]
RewriteRule ^cloud-hosting-service$ cloud-hosting-service.php [L,QSA,NC]
RewriteRule ^cloud-hosting-service/([a-z-]+)/?$ cloud-hosting-city.php?city=$1 [L,QSA,NC]
RewriteRule ^vps-hosting-service/$ vps-hosting-service [R=301,L]
RewriteRule ^vps-hosting-service$ vps-hosting-service.php [L,QSA,NC]
RewriteRule ^vps-hosting-service/([a-z-]+)/?$ vps-hosting-service-city.php?city=$1 [L,QSA,NC]

# eCommerce Service City Pages
RewriteRule ^ecommerce-development-service/$ ecommerce-development-service [R=301,L]
RewriteRule ^ecommerce-development-service$ ecommerce-development-service.php [L,QSA,NC]
RewriteRule ^ecommerce-development-service/([a-z-]+)/?$ ecommerce-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^online-store-setup-service/$ online-store-setup-service [R=301,L]
RewriteRule ^online-store-setup-service$ online-store-setup-service.php [L,QSA,NC]
RewriteRule ^online-store-setup-service/([a-z-]+)/?$ online-store-setup-city.php?city=$1 [L,QSA,NC]
RewriteRule ^payment-gateway-integration-service/$ payment-gateway-integration-service [R=301,L]
RewriteRule ^payment-gateway-integration-service$ payment-gateway-integration-service.php [L,QSA,NC]
RewriteRule ^payment-gateway-integration-service/([a-z-]+)/?$ payment-gateway-integration-city.php?city=$1 [L,QSA,NC]
RewriteRule ^shopping-cart-development-service/$ shopping-cart-development-service [R=301,L]
RewriteRule ^shopping-cart-development-service$ shopping-cart-development-service.php [L,QSA,NC]
RewriteRule ^shopping-cart-development-service/([a-z-]+)/?$ shopping-cart-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^product-catalog-management-service/$ product-catalog-management-service [R=301,L]
RewriteRule ^product-catalog-management-service$ product-catalog-management-service.php [L,QSA,NC]
RewriteRule ^product-catalog-management-service/([a-z-]+)/?$ product-catalog-management-city.php?city=$1 [L,QSA,NC]
RewriteRule ^multi-vendor-marketplace-service/$ multi-vendor-marketplace-service [R=301,L]
RewriteRule ^multi-vendor-marketplace-service$ multi-vendor-marketplace-service.php [L,QSA,NC]
RewriteRule ^multi-vendor-marketplace-service/([a-z-]+)/?$ multi-vendor-marketplace-city.php?city=$1 [L,QSA,NC]

# Design Service City Pages
RewriteRule ^logo-design-service/$ logo-design-service [R=301,L]
RewriteRule ^logo-design-service$ logo-design-service.php [L,QSA,NC]
RewriteRule ^logo-design-service/([a-z-]+)/?$ logo-design-city.php?city=$1 [L,QSA,NC]
RewriteRule ^graphic-design-service/$ graphic-design-service [R=301,L]
RewriteRule ^graphic-design-service$ graphic-design-service.php [L,QSA,NC]
RewriteRule ^graphic-design-service/([a-z-]+)/?$ graphic-design-city.php?city=$1 [L,QSA,NC]
RewriteRule ^landing-page-design-service/$ landing-page-design-service [R=301,L]
RewriteRule ^landing-page-design-service$ landing-page-design-service.php [L,QSA,NC]
RewriteRule ^landing-page-design-service/([a-z-]+)/?$ landing-page-design-service-city.php?city=$1 [L,QSA,NC]
RewriteRule ^landing-page-design/$ landing-page-design-service [R=301,L]
RewriteRule ^landing-page-design/([a-z-]+)/?$ landing-page-design-service-city.php?city=$1 [L,QSA,NC]

# Dynamic sitemap redirect
RewriteRule ^sitemap\.xml$ sitemap.xml.php [L]

# Contact form action without .php extension
RewriteRule ^contact-action$ contact-action.php [L]

# Remove .php from URL (redirect to clean URL)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Internally rewrite clean URL to .php file
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Custom error pages
ErrorDocument 404 /404.php
