RewriteEngine On

# Force www and HTTPS
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

# City service page redirects
RewriteRule ^seo-services/([a-z-]+)/?$ seo-city.php?city=$1 [L,QSA]
RewriteRule ^sem-services/([a-z-]+)/?$ sem-city.php?city=$1 [L,QSA,NC]
RewriteRule ^web-development-service/([a-z-]+)/?$ web-development-city.php?city=$1 [L,QSA,NC]
RewriteRule ^smm-service/([a-z-]+)/?$ smm-city.php?city=$1 [L,QSA,NC]
RewriteRule ^content-writing-service/([a-z-]+)/?$ content-writing-city.php?city=$1 [L,QSA,NC]
RewriteRule ^email-marketing-service/([a-z-]+)/?$ email-marketing-city.php?city=$1 [L,QSA,NC]

# Dynamic sitemap redirect
RewriteRule ^sitemap\.xml$ sitemap.xml.php [L]

# Remove .php from URL (redirect to clean URL)
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=301,L]

# Internally rewrite clean URL to .php file
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Custom error pages
ErrorDocument 404 /404.php